<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TTRS API</title>
</head>
<body>
<script>
  async function handleRequest() {
    const url = new URL(window.location.href);

    const left = url.searchParams.get("left");
    const operator = url.searchParams.get("operator");
    const right = url.searchParams.get("right");

    if (!left || !operator || !right) {
      document.body.innerText = JSON.stringify({ error: "Missing params" });
      return;
    }

    const a = parseFloat(left);
    const b = parseFloat(right);
    let result;

    switch (operator) {
      case "ร": case "*": result = a * b; break;
      case "รท": case "/": result = a / b; break;
      case "+": result = a + b; break;
      case "-": result = a - b; break;
      default: result = "unknown operator";
    }

    // Return JSON as plain text (so fetch(...).text() works fine)
    document.body.innerText = JSON.stringify({ result });
  }

  handleRequest();
</script>
</body>
</html>
