<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TTRS API</title>
</head>
<body>
<script>
  (function(){
    const url = new URL(window.location.href);
    const left = url.searchParams.get("left");
    const operator = url.searchParams.get("operator");
    const right = url.searchParams.get("right");

    if (!left || !operator || !right) {
      document.write(JSON.stringify({ error: "Missing params" }));
      return;
    }

    const a = parseFloat(left);
    const b = parseFloat(right);
    let result;

    switch (operator) {
      case "ร": case "*": result = a * b; break;
      case "รท": case "/": result = a / b; break;
      case "+": result = a + b; break;
      case "-": result = a - b; break;
      default: result = "unknown operator";
    }

    // Only output JSON, no HTML
    document.open();
    document.write(JSON.stringify({ result }));
    document.close();
  })();
</script>
</body>
</html>
